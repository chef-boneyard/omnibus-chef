# NOTE: this runs the omnibus cookbook, but doens't mount filesystems or
# run omnibus yet.  Use 'kichen converge' to setup the virt and install
# omnibus cookbooks and then be able to login to it

driver:
  name: vagrant
  customize:
    memory: 2048
    cpus: 4

provisioner:
  name: chef_zero
  require_chef_omnibus: true

platforms:
  - name: ubuntu-10.04
    run_list: apt::default
  - name: ubuntu-12.04
    run_list: apt::default
  - name: ubuntu-12.10
    run_list: apt::default
  - name: ubuntu-13.04
    run_list: apt::default
  - name: ubuntu-13.10
    run_list: apt::default
  - name: ubuntu-14.04
    run_list: apt::default

suites:
  - name: chefdk
    run_list:
      - recipe[omnibus::default]
    attributes:
      omnibus:
        build_user: vagrant
        build_dir:  /home/vagrant/omnibus-chef
        install_dir: /opt/chefdk
  - name: chef
    run_list:
      - recipe[omnibus::default]
    attributes:
      omnibus:
        build_user: vagrant
        build_dir:  /home/vagrant/omnibus-chef
        install_dir: /opt/chef
